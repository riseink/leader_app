// overrides to wagtail-overlay styles

// five-column (at 1440px)
$five-col-overlay-gallery-grid-max-width: 1440px;
$five-col-overlay-gallery-xl-thumbnail-size: 246px;
$five-col-overlay-gallery-lg-thumbnail-size: 220px;
$five-col-overlay-gallery-md-thumbnail-size: 213px;
$five-col-overlay-gallery-sm-thumbnail-size: 157px;
$five-col-overlay-gallery-xs-thumbnail-size: 200px;
$five-col-overlay-gallery-xxs-thumbnail-size: 270px;

// six-column (at 1440px)
$six-col-overlay-gallery-grid-max-width: 1440px;
$six-col-overlay-gallery-xl-thumbnail-size: 205px;
$six-col-overlay-gallery-lg-thumbnail-size: 176px;
$six-col-overlay-gallery-md-thumbnail-size: 160px;
$six-col-overlay-gallery-sm-thumbnail-size: 157px;
$six-col-overlay-gallery-xs-thumbnail-size: 200px;
$six-col-overlay-gallery-xxs-thumbnail-size: 270px;

// overlay animation
.mfp-animate {

    // Initial position
    .mfp-content {
        opacity: 0;
        transition: all 350ms $cubic-bezier;
        transform: translateX(-50%);
    }

    &.mfp-bg {
        opacity: 0;
        transition: all 350ms $cubic-bezier;
    }

    // Animate in
    &.mfp-ready {
        .mfp-content {
            opacity: 1;
            transform: translateX(0);
        }

        &.mfp-bg {
            opacity: 0.85;
        }
    }

    // Animate out
    &.mfp-removing {
        .mfp-content {
            transform: translateX(-50%);
            opacity: 0;
        }

        &.mfp-bg {
            opacity: 0;
        }
    }
}

// overlay
.mfp-bg {
    background-color: #000;
}

.mfp-container {
    padding: 0;
}

// overlay gallery
.overlay-gallery__grid {
    .media-copy-video-container {
        width: 100%;
        height: 100%;
    }
}

// show only first gallery item on mobile,
// and open carousel modal on click
.responsive-gallery-grid {

    .flex-item {
        padding-top: 1rem;
        padding-bottom: 1rem;
    }

    @media (max-width: 767px) {
        padding-top: 1rem;
        .flex-item {
            width: 100%;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            box-sizing: border-box;
        }
        
        .overlay-gallery-item {
            width: 100% !important;
            height: 300px !important;
            @include respond-to(xs) {
                height: 500px !important;
            }
            &:not(:first-child) {
                display: none;
            }

            .overlay-gallery-trigger {
                width: 100%;
                height: 100%;
            }

            .mfp-arrow {

                display: block;
                background: rgba(255,255,255,0.35);

                // resize
                margin-top: -28px;
                width: 60px;
                height: 85px;

                // adjust arrow positions
                &:after,&:before {
                    margin-top: 21px;
                }
                &.mfp-arrow-left:after {
                    margin-left: 15px;
                }
                &.mfp-arrow-right:after {
                    margin-left: 23px;
                }

                pointer-events: none;

                // only show on mobile
                @media (min-width: $md-breakpoint){
                    display: none;
                }
            }
        }
    }
}

// five-column grid of squares (at 1440px)
.five-column-gallery-grid {
    max-width: $five-col-overlay-gallery-grid-max-width;
    margin: 0 auto;
    .overlay-gallery-item, a.overlay-gallery-trigger {
        @media (min-width: $xxs-breakpoint) { 
            width: $five-col-overlay-gallery-xxs-thumbnail-size;
            height: $five-col-overlay-gallery-xxs-thumbnail-size;
        }
        @media (min-width: $xs-breakpoint) { 
            width: $five-col-overlay-gallery-xs-thumbnail-size;
            height: $five-col-overlay-gallery-xs-thumbnail-size;
        }
        @media (min-width: $sm-breakpoint) { 
            width: $five-col-overlay-gallery-sm-thumbnail-size;
            height: $five-col-overlay-gallery-sm-thumbnail-size;
        }
        @media (min-width: $md-breakpoint) { 
            width: $five-col-overlay-gallery-md-thumbnail-size;
            height: $five-col-overlay-gallery-md-thumbnail-size;
        }
        @media (min-width: $lg-breakpoint) { 
            width: $five-col-overlay-gallery-lg-thumbnail-size;
            height: $five-col-overlay-gallery-lg-thumbnail-size;
        }
        @media (min-width: $xl-breakpoint) { 
            width: $five-col-overlay-gallery-xl-thumbnail-size;
            height: $five-col-overlay-gallery-xl-thumbnail-size;
        }
    }
}

// six-column grid of squares (at 1440px)
.six-column-gallery-grid {
    max-width: $six-col-overlay-gallery-grid-max-width;
    margin: 0 auto;
    .overlay-gallery-item, a.overlay-gallery-trigger {
        @media (min-width: $xxs-breakpoint) {
            width: $six-col-overlay-gallery-xxs-thumbnail-size;
            height: $six-col-overlay-gallery-xxs-thumbnail-size;
        }

        @media (min-width: $xs-breakpoint) {
            width: $six-col-overlay-gallery-xs-thumbnail-size;
            height: $six-col-overlay-gallery-xs-thumbnail-size;
        }

        @media (min-width: $sm-breakpoint) {
            width: $six-col-overlay-gallery-sm-thumbnail-size;
            height: $six-col-overlay-gallery-sm-thumbnail-size;
        }

        @media (min-width: $md-breakpoint) {
            width: $six-col-overlay-gallery-md-thumbnail-size;
            height: $six-col-overlay-gallery-md-thumbnail-size;
        }

        @media (min-width: $lg-breakpoint) {
            width: $six-col-overlay-gallery-lg-thumbnail-size;
            height: $six-col-overlay-gallery-lg-thumbnail-size;
        }

        @media (min-width: $xl-breakpoint) {
            width: $six-col-overlay-gallery-xl-thumbnail-size;
            height: $six-col-overlay-gallery-xl-thumbnail-size;
        }
    }
}

// make image gallery items grayscale and fade to color on hover
.social-media-gallery {
    .overlay-gallery-item-thumbnail {
        @include fade_grayscale_to_color;
    }
}

.overlay-gallery__overlay {
    .mfp-content {
        background: none;
    }

    .overlay-modal__image-container {
        // contain width and height of overlay gallery images in modal
        img {
            max-height: 100vh;
            width: auto;
            max-width: 100%;
            margin: 0 auto;
        }
    }

    .overlay-modal__copy-container {
        color: $text-color-light;
        text-align: center;
        p {
            padding-top: 0;
        }
    }
}

.mfp-arrow-right {
    &:before { border-left: none; }
    &:after { border-left-color: $primary; }
}

.mfp-arrow-left {
    &:before { border-right: none; }
    &:after { border-right-color: $primary; }
}


.mfp-close-btn-in .mfp-close {
    color: $primary;
    margin: 1rem;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.25);
    i { display: block; }
    &:hover {
        background: rgba(255, 255, 255, 0.35);
    }
}

// Overlays

.overlay {
    .overlay-modal {
        background: none;
        top: 0;
        left: unset;
        right: 150%;

        // position off-screen and slide in from left
        transition: all 500ms $cubic-bezier;

        .overlay-modal__controls a, .close {
            border-radius: 50%;
            background: rgba(255, 255, 255, 0);

            &:hover {
                background: rgba(255, 255, 255, 0.3);
            }
        }

        @include respond-to(md) {
            top: 5vh;
        }


        @include respond-to(lg) {
            top: 10vh;
        }
    
    }

    &.active {
        .overlay-modal {
            right: 0;
        }

        @include respond-to(md) {
            .overlay-modal {
                right: 50%;
                margin-left: unset;
                margin-right: -45%;
            }
        }
    }
}

.overlay-gallery__grid {
    padding: 2rem;

    @include respond-to(lg) {
        padding: 2rem 5.5rem;
    }
}

.overlay-gallery {
    .overlay-modal {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .overlay-modal__copy-container {
        .rich-text {
            padding-top: 0;
            p {
                margin-bottom: 0;
            }
        }
    }
}


//
// Social Media Galleries
//

.gallery-modal__social .mfp-content {
  background-color: $white;
  border-radius: 10px;
  max-width: 450px;

  .overlay-modal__video-container video, 
  .overlay-modal__image-container img {
    border-radius: 10px;
  }
  .overlay-modal__video-container,
  .overlay-modal__image-container {
    padding: .75rem .75rem 0;
  }
  .overlay-modal__copy-container {
    padding: 1rem 1.5rem 0;
  }

  .overlay-modal__copy-container {
    color: $text-color;
    text-align: left;

    .client-profile__container {
      display: block;

      & + .rich-text {
        // make left/right padding line up with client profile
        padding: 1rem 0;
      }
    }
  }
}

.client-profile__container {
  display: none;

  img.client-profile__image {
    vertical-align: middle;
    display: inline-block;
    border-radius: 50%;
  }

  .client-profile__name {
    vertical-align: middle;
    display: inline-block;
    color: $text-color;
    font-weight: bold;
  }
}

// Violators

.violator {
    // hide by default
    transform: translateY(100%);

    // fade out after violator has slide off-screen
    transition: transform ($transition-time * 0.75) $cubic-bezier, opacity 0ms ease-in-out 1000ms;

    // foundation resets
    .violator-img-wrap {
        display: block;
    }

    .violator-container > * {
        margin: unset;
    }

    // mobile

    .violator-close {
        align-self: flex-start;

        img.violator-close-icon {
            width: 1rem;
            height: 1rem;
        }
    }

    .violator-announcement-container {
        padding: 0 0.5rem;
        display: flex;

        &:not(:only-of-type) {
            flex-direction: column;
        }
    }

    .violator-text {
        margin: 0.25rem;

        p {
            font-size: 0.5rem;
            line-height: 0.75rem;
            font-weight: $regular;
            text-transform: uppercase;
        }
    }

    .violator-img-wrap {
        margin: 0.25rem;

        img {
            max-width: 100px;
        }
    }

    .button {
        color: $button-secondary-color;
        background: $button-secondary-bg-color;
        border: 3px solid $button-secondary-border;

        &:hover {
            color: $button-secondary-hover-color;
            background-color: $button-secondary-hover-bg-color;
            border: 3px solid $button-secondary-hover-border;
        }
    }

    &.hidden {
        // global .hidden class sets display to none
        // TODO: rename this class to a violator-specific name?
        display: unset;
        transform: translateY(100%) !important;
        opacity: 0;
    }

    @include respond-to(sm) {
        .violator-text {
            p {
                font-size: 0.75rem;
                line-height: 1rem;
            }
        }
    }


    @include respond-to(md) {
        .violator-container {
            padding-top: 0.5;
            padding-bottom: 0.5;

            .violator-announcement-container {
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                padding: 0 1rem;

                &:only-of-type {
                    justify-content: center;
                }
            }
        }

        .violator-close {
            align-self: center;

            img.violator-close-icon {
                width: 2rem;
                height: 2rem;
            }
        }

        .violator-text {
            flex: unset;
            margin-left: 1rem;

            p {
                font-weight: $light;
                font-size: 1.125rem;
                line-height: 1.5rem;
            }
        }

        .violator-img-wrap {
            margin: 0.5rem;

            img {
                max-width: 150px;
            }
        }
    }
}

//
// Video Modals
// 

.overlay .overlay-modal {
  max-width: 1440px;
  margin: 0 auto;
}

.video-modal__preview-video,
.video-modal__video {
    width: unset;
    display: block;
    margin: auto;
    max-height: 90vh;
    max-width: 100%;
}

.video-modal__preview-image-container {
    .play-icon {
        border-radius: 50%;
        background-color: rgba($very-dark, 0.8);
    }
}
